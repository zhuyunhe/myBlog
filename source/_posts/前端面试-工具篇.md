---
title: 前端面试-工具篇
date: 2016-06-16 14:23:10
tags: 
- 面试
categories: 学习笔记

---
- 说说对浏览器缓存的理解？  
	[参考](http://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651221145&idx=1&sn=ce8cc0dd80142980026eb156d5b1f269&scene=23&srcid=0617Cw01DNgD2HShv3Og3wWe#rd)
	浏览器缓存（Brower Caching）是浏览器在本地磁盘对用户最近请求过得文档进行存储，当访问者再次访问同一个页面时，浏览器就可以直接从本地磁盘加载文档。  
	浏览器缓存的优点有：
	- 减少冗余的数据传输，节省了流量。
	- 减少服务器负担，提高网站性能
	- 加快了客户端加载网页的速度  
	
	浏览器缓存主要分为：强缓存（彻底缓存）和协商缓存。  
	浏览器在第一次请求发生后，再次请求时：  
	- 浏览器会先获取该资源缓存的header信息，根据其中的expires和cache-control判断是否有命中强缓存，若命中则直接从缓存中获取资源，包括缓存的header信息，本次请求就不会与服务器进行通信。  
	- 如果没有命中强缓存，浏览器会发送请求到服务器，该请求会携带**第一次请求返回的有关缓存的header字段信息**（Last-Modified/IF-Modified-Since、Etag/IF-None-Match），由服务器根据请求中的相关header信息来对比结果是否命中协商缓存，若命中，则服务器返回新的响应header信息更新缓存中的对应header信息，但是并不返回资源内容，它告知浏览器可以直接从缓存中获取资源；**若连协商缓存也没有命中，则服务器会返回最新的资源内容**。

	**强缓存**是利用http的返回头中的Expires和Cache-Control两个字段来控制的，用来表示资源的缓存时间。Expires是一个绝对时间的GMT格式的时间字符串；Cache-Control是一个相对时间，以秒为单位。当这二者在服务器端同时启用时，Cache-Control的优先级更高。  

	**协商缓存**是由服务器来确定缓存资源缓存资源是否可用，所以客户端与服务器端要通过某种标识来进行通信，从而让服务器判断请求是否可以缓存访问，这主要涉及到下面两组header字段，这两组字段都是成对出现的，即第一次请求的**响应头**带着某个字段（Last-Modified**或**Etag），则客户端后续请求的**请求头**中会带上对应的请求字段（If-Modified-Since**或**If-None-Match），若**响应头**没有Last-Modified**或**Etag，则**请求头**也不会有对应的If-Modified-Since**或**If-None-Match。		
	这两组字段的区别是Last-Modified是根据时间来判断（只能精确到秒），而Etag是根据资源内容。Last-Modified与ETag是可以一起使用的，服务器会优先验证ETag，Etag一致的情况下，才会继续比对Last-Modified，最后才决定是否返回304（Not Modified）。
